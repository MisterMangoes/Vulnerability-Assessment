//CWE416_Use_After_Free__new_delete_array_int_07

#include <cstdio>
#include <cassert>

static int staticFive = 5;

int main()
{
    int * data;
    /* Initialize data */
    data = NULL;
    if(staticFive==5)
    {
        data = new int[100];
        {
            size_t i;
            for(i = 0; i < 100; i++)
            {
                data[i] = 5;
            }
        }
        /* POTENTIAL FLAW: Delete data in the source - the bad sink attempts to use data */
        delete [] data;
        data = NULL;
    }
    if(staticFive==5)
    {
        /* POTENTIAL FLAW: Use of data that may have been deleted */
        assert(data != NULL);
        printf("%d\n", data[0]);
        /* POTENTIAL INCIDENTAL - Possible memory leak here if data was not deleted */
    }
    printf("%s\n", "finished");
    return 0;
}