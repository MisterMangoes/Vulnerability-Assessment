#include <stdio.h>
#include <assert.h>

int globalReturnsTrueOrFalse() {
	srand(time(0)); //use current time as seed
	return (rand() % 2);
}

int main() {
	int data = -1;
	if(globalReturnsTrueOrFalse()) {
		fscanf(stdin, "%d", &data);
	}
	else {
		data = 7;
	}
	printf("Data: %d\n", data);
	int bufferArraySize = 15;
	int * buffer = (int *)malloc(bufferArraySize * sizeof(int));
	for (int i = 0; i < bufferArraySize; i++) {
		buffer[i] = 0;
	}
	if (data >= 0) {
		buffer[data] = 6;
		for(int i = 0; i < bufferArraySize; i++) {
			printf("%d\n", buffer[i]);
		}
	}
	else {
		printf("%s\n", "ERROR: Array index is negative.");
	}
	free(buffer);
	return 0;
}

/*
Question: Which of the following is correct?
a) A stack buffer overflow occurs in the for loop at line 20
b) A heap buffer overflow occurs at line 24
c) A null pointer derference occurs in the for loop at line 25
d) A heap buffer overflow occurs in the for loop at at line 25
*/