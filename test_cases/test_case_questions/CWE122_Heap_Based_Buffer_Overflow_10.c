#include <stdlib.h>
#include <assert.h>

static int badStatic = 0;

static double * badSource(double * data) {
	if(badStatic) {
		int dataMemorySize = sizeof(data);
		data = (double *)malloc(dataMemorySize);
		//assert(dataMemorySize >= sizeof(int));
		//assert(dataMemorySize >= sizeof(double));
		*data = 1.7E300;
	}
	return data;
}

int main() {
	int dataFreed = 0;
	double * data = NULL;
	badStatic = 1;
	data = badSource(data);
	//assert(data != NULL);
	printf("%g\n", *data);
	//assert(!dataFreed);
	free(data);
	dataFreed = 1;
	return 0;
}

/*
Question: Which of the following is correct?
a) To catch this bug, the assertion at line 24 should be added
b) To catch this bug, the assertion at line 11 should be added
c) To catch this bug, the assertion at line 10 should be added
d) To catch this bug, the assertion at line 22 should be added
*/