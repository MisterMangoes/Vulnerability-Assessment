#include <wchar.h>
#include <assert.h>

#define ALLOCA alloca

#define WIDE_STRING L"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" //42 wide characters

static int staticReturnsTrue() {
	return 1;
}

int main() {
	void * data = NULL;
	if(staticReturnsTrue()) {
		data = (void *)WIDE_STRING;
		size_t dataLen = wcslen((wchar_t *)data);
		int destMemorySize = dataLen * sizeof(char);
		void * dest = NULL;
		dest = (void *)ALLOCA(destMemorySize);
		//assert(destMemorySize >= dataLen * sizeof(wchar_t));
		//assert(destMemorySize >= dataLen * sizeof(char));
		(void)wcscpy(dest, data);
		//assert(destMemorySize >= dataLen)
		wprintf(L"%ls\n", dest);
		//assert(destMemorySize >= dataLen * sizeof(char));
	}
	return 0;
}

/*
Question: Which of the following is correct?
a) To catch this bug, the assertion at line 23 should be added
b) To catch this bug, the assertion at line 20 should be added
c) To catch this bug, the assertion at line 21 should be added
d) To catch this bug, the assertion at line 25 should be added
*/